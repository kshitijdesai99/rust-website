"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[202],{51042:function(te,D,a){var R=a(1413),y=a(67294),K=a(42110),h=a(84089),A=function(I,L){return y.createElement(h.Z,(0,R.Z)((0,R.Z)({},I),{},{ref:L,icon:K.Z}))},b=y.forwardRef(A);D.Z=b},86598:function(te,D,a){a.r(D);var R=a(15009),y=a.n(R),K=a(99289),h=a.n(K),A=a(5574),b=a.n(A),w=a(51042),I=a(2618),L=a(90930),le=a(62652),T=a(76772),ae=a(53025),ne=a(28036),u=a(67294),re=a(82254),_e=a(66327),se=a(96486),P=a.n(se),M=a(87200),C=a(85893),oe=function(){var j,d,B,v,W,f,F,m,N,p,ie=(0,T.useModel)("@@initialState"),t=ie.initialState,g=(0,u.useRef)(),ue=(0,u.useRef)(),U=(0,u.useRef)(),o=(0,T.useParams)(),de=(0,u.useState)({}),z=b()(de,2),E=z[0],ve=z[1],fe=(0,u.useState)([]),Z=b()(fe,2),me=Z[0],pe=Z[1],Ee=(0,u.useState)({}),$=b()(Ee,2),G=$[0],be=$[1],ce=(0,u.useState)([]),Q=b()(ce,2),ye=Q[0],Pe=Q[1],Me=(0,u.useState)(!1),x=b()(Me,2),Oe=x[0],H=x[1],Te=(0,u.useState)(),V=b()(Te,2),ge=V[0],J=V[1],De=ae.Z.useForm(),Re=b()(De,1),Le=Re[0],he=(0,u.useState)(),X=b()(he,2),Ce=X[0],Y=X[1],Ue=(0,u.useRef)(),Se=(j=t==null||(d=t.settings)===null||d===void 0||(d=d.raw_tables)===null||d===void 0||(d=d[o.table])===null||d===void 0||(d=d.create)===null||d===void 0?void 0:d.enable)!==null&&j!==void 0?j:!1,k=(B=t==null||(v=t.settings)===null||v===void 0||(v=v.raw_tables)===null||v===void 0||(v=v[o.table])===null||v===void 0||(v=v.table)===null||v===void 0?void 0:v.page_size)!==null&&B!==void 0?B:20,Ke=(W=t==null||(f=t.settings)===null||f===void 0||(f=f.raw_tables)===null||f===void 0||(f=f[o.table])===null||f===void 0||(f=f.table)===null||f===void 0?void 0:f.table_size)!==null&&W!==void 0?W:"middle";return(0,u.useEffect)(function(){var r=function(){var e=h()(y()().mark(function l(){var n,_,c;return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,M.st)(o.table);case 2:return _=s.sent,c=(n=_.primary_key)!==null&&n!==void 0?n:[],pe(c),be(_.cols),s.next=8,(0,T.request)("".concat("/api","/graphql"),{method:"POST",headers:(0,I.zl)(),data:{query:(0,re.K)(),variables:{}}});case 8:return s.abrupt("return",s.sent);case 9:case"end":return s.stop()}},l)}));return function(){return e.apply(this,arguments)}}();r().then(function(e){var l=(0,_e.Z)(e.data),n=l.getQueryType().getFields();ve(n)})},[]),(0,u.useEffect)(function(){var r,e,l;if(!P().isEmpty(E)){var n=o.table,_=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[n])!==null&&r!==void 0?r:{},c=E[n].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields(),i=(0,M.SS)(_,n,c,J,Y,g,G);Pe(i),(l=g.current)===null||l===void 0||l.reloadAndRest()}},[E]),(0,C.jsxs)(L._z,{header:{title:null,breadcrumb:{items:[{href:"#",title:"Raw Tables",onClick:function(){return T.history.push("/table")}},{title:(F=t==null||(m=t.settings)===null||m===void 0||(m=m.raw_tables)===null||m===void 0||(m=m[o.table])===null||m===void 0||(m=m.table)===null||m===void 0?void 0:m.title)!==null&&F!==void 0?F:P().startCase(o.table)}]}},children:[(0,C.jsx)(le.Z,{headerTitle:(N=t==null||(p=t.settings)===null||p===void 0||(p=p.raw_tables)===null||p===void 0||(p=p[o.table])===null||p===void 0||(p=p.table)===null||p===void 0?void 0:p.title)!==null&&N!==void 0?N:P().startCase(o.table),actionRef:g,request:function(){var r=h()(y()().mark(function e(l,n,_){var c,i,s,S,q,ee;return y()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return s=o.table,S=(c=t==null||(i=t.settings)===null||i===void 0||(i=i.raw_tables)===null||i===void 0?void 0:i[s])!==null&&c!==void 0?c:{},q=E[s].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields(),ee=Object.values(E[s].args).find(function(Ae){return Ae.name=="filters"}),O.next=6,(0,M.pC)(l,n,_,S,s,q,ee,[],G);case 6:return O.abrupt("return",O.sent);case 7:case"end":return O.stop()}},e)}));return function(e,l,n){return r.apply(this,arguments)}}(),toolBarRender:function(){var e;return Se?[(0,C.jsx)(ne.ZP,{icon:(0,C.jsx)(w.Z,{}),onClick:t!=null&&(e=t.settings)!==null&&e!==void 0&&(e=e.raw_tables)!==null&&e!==void 0&&(e=e[o.table].editor)!==null&&e!==void 0&&e.enable?function(){var l,n,_=o.table,c=(l=t==null||(n=t.settings)===null||n===void 0||(n=n.raw_tables)===null||n===void 0?void 0:n[_])!==null&&l!==void 0?l:{},i=window.location.pathname.split("/"),s=i[i.length-1],S=i[i.length-2];T.history.push("/".concat(S,"/").concat(s,"/create"),{config:c,tableName:_})}:function(){var l;H(!0),U==null||(l=U.current)===null||l===void 0||l.resetFields()},type:"primary",size:"small",children:"New"},"button")]:[]},columns:ye,rowKey:"_uuid_v4_",dateFormatter:"string",toolbar:{multipleLine:!0},pagination:{pageSizeOptions:P().sortedUniq([10,20,50,100,k].sort(function(r,e){return r-e})),defaultPageSize:k},defaultSize:Ke}),function(r,e){if(!P().isEmpty(E)){var l=o.table,n=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[l])!==null&&r!==void 0?r:{},_=E[l].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields();return(0,M.HF)(n,l,_,ge,J,ue,g,me)}}(),function(r,e){if(!P().isEmpty(E)){var l=o.table,n=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[l])!==null&&r!==void 0?r:{},_=E[l].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields();return(0,M.SI)(n,l,_,Oe,H,U,g)}}(),function(r,e){if(!P().isEmpty(E)){var l=o.table,n=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[l])!==null&&r!==void 0?r:{},_=E[l].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields();return(0,M.WM)(n,l,_,Ce,Y,Ue)}}()]})};D.default=oe}}]);
